gitlab_pull_test:
  needs: ["gitversioning"]
  stage: build
  image:
    name: python:3.10.10-slim-buster
    entrypoint: [""]
  before_script: []
    #- echo "machine ${CI_API_V4_URL}/projects/${HELM_PROJECT_REGISTRY_ID}/packages/pypi" > ~/.netrc
    #- echo "login gitlab-ci-token" >> ~/.netrc
    #- echo "password ${CI_JOB_TOKEN}" >> ~/.netrc
  script:
    # Uploading package
    - echo "--extra-index-url https://${GC_REGION}-python.pkg.dev/${GC_PROJECT_ID}/nrt-python-registry/simple" > requirements.txt
    - echo "nrtpygs==0.25.3" >> requirements.txt
    - pip install -r requirements.txt
  after_script: []
