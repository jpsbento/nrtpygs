push_to_gitlab_py_registry:
  needs: ["gitversioning", "build_wheel"]
  stage: deploy
  image:
    name: python:3.10.10-slim-buster
    entrypoint: [""]
  before_script: []
  script:
    # Registering pip with google artifact repo
    - pip install twine
    # Uploading package
    - > 
      python -m twine upload
      --username ${CI_DEPLOY_USER}
      --password ${CI_DEPLOY_PASSWORD}
      --repository-url ${CI_API_V4_URL}/projects/${HELM_PROJECT_REGISTRY_ID}/packages/pypi 
      nrtpygs-${_MAJOR_MINOR_PATCH_}.post${CI_PIPELINE_IID}-py3-none-any.whl
  after_script: []